<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<ul style="list-style-type: none; margin: 0; padding: 0; overflow: hidden; background-color: red ; max-width:100%; padding-top:0%; padding-bottom:0%; display: flex; justify-content: center; font-size:small;">
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="../index.html">About Me</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="https://github.com/anly501/anly-501-project-rdr-190100">Code</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="https://github.com/anly501/anly-501-project-rdr-190100/tree/main/data">Data</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./introduction.html">Introduction</a>
  </li>
  <li class="dropdwn" style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="javascript:void(0)" class="drpbtn">Data Gathering</a>
    <div class="dropdwn-content">
      <a style = "display: block;" href="./data_gathering_twitterdata.html">Twitter Data</a>
      <a style = "display: block;" href="./data_gathering_recorddata.html">Record Data</a>
    </div>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./data_cleaning.html">Data Cleaning</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./exploring_data.html">Exploring Data</a>
  </li>
  <li class="dropdwn" style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="javascript:void(0)" class="drpbtn">Naive Bayes’</a>
    <div class="dropdwn-content">
      <a style = "display: block;" href="./Naive-Bayes-twitterdata.html">Twitter Data in Python</a>
      <a style = "display: block;" href="./Naive-Bayes-recorddata.html">Record Data in R</a>
    </div>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./Decision-Trees.html">Decision Trees</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./SVM-Record-data.html">SVM</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./Clustering.html">Clustering</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./introduction.html">ARM and Networking</a>
  </li>
  <li style = "display: inline-block; color: white; text-align: center; padding: 6px 6px;">
    <a style = "display: inline-block; color: white; text-align: center; padding: 6px 6px; text-decoration: none; outline-style: solid; outline-color: black; margin-left: -2px;" 
    href="./introduction.html">Conclusion</a>
  </li>
  </ul>

  <video width="100%" height="100%" autoplay muted>
    <source src="./f1_video1.mp4" type="video/mp4"/>
  </video>

<meta name="author" content="Ramdayal Rewaria">

<title>Twitter Data Gathering</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

li a:hover, .dropdwn:hover .drpbtn {
  background-color: black;
}
.dropdwn-content {
    display: none;
    position:static;
    background-color: black;
    min-width: 160px; 
}
.dropdwn-content a {
    color: white;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    text-align: center;
}
.dropdwn:hover .dropdwn-content {
  display: block;
  opacity: 1; 
}
li.dropdwn {
  display: inline-block;
}
</style>


<script src="f1_twitter_api_files/libs/clipboard/clipboard.min.js"></script>
<script src="f1_twitter_api_files/libs/quarto-html/quarto.js"></script>
<script src="f1_twitter_api_files/libs/quarto-html/popper.min.js"></script>
<script src="f1_twitter_api_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="f1_twitter_api_files/libs/quarto-html/anchor.min.js"></script>
<link href="f1_twitter_api_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="f1_twitter_api_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="f1_twitter_api_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="f1_twitter_api_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="f1_twitter_api_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Twitter Data Gathering</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ramdayal Rewaria </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="data-gathering" class="level1">
<h1>Data Gathering</h1>
<ul>
<li>Data Gathering and Pre-Processing is a very important step in any Data science project pipeline. It is undeniable that 80% of a data scientist’s time and effort is spent in collecting, cleaning and preparing the data for analysis because datasets come in various sizes and are different in nature. It is extremely important for a data scientist to reshape and refine the datasets into usable datasets, which can be leveraged for analytics.</li>
<li>Knowledge is power, information is knowledge, and data is information in digitized form, at least as defined in IT. Hence, data is power. But before you can leverage that data into a successful strategy for your organization or business, you need to gather it. That’s your first step.</li>
<li>Before we define what is data collection, it’s essential to ask the question, “What is data?” The abridged answer is, data is various kinds of information formatted in a particular way. Therefore, data collection is the process of gathering, measuring, and analyzing accurate data from a variety of relevant sources to find answers to research problems, answer questions, evaluate outcomes, and forecast trends and probabilities.</li>
<li>Our society is highly dependent on data, which underscores the importance of collecting it. Accurate data collection is necessary to make informed business decisions, ensure quality assurance, and keep research integrity.</li>
<li>During data collection, the researchers must identify the data types, the sources of data, and what methods are being used. We will soon see that there are many different data collection methods. There is heavy reliance on data collection in research, commercial, and government fields.</li>
<li><code>Why Do We Need Data Collection?</code>
<ul>
<li>Before a judge makes a ruling in a court case or a general creates a plan of attack, they must have as many relevant facts as possible. The best courses of action come from informed decisions, and information and data are synonymous.</li>
<li>The concept of data collection isn’t a new one but the world has changed. There is far more data available today, and it exists in forms that were unheard of a century ago. The data collection process has had to change and grow with the times, keeping pace with technology.</li>
<li>Whether you’re in the world of academia, trying to conduct research, or part of the commercial sector, thinking of how to promote a new product, you need data collection to help you make better choices.</li>
</ul></li>
<li><code>What Are the Different Methods of Data Collection?</code>
<ul>
<li>Surveys</li>
<li>Transactional Tracking</li>
<li>Interviews and Focus Groups</li>
<li>Observation</li>
<li>Online Tracking</li>
<li>Forms</li>
<li>Social Media Monitoring</li>
<li>Application Programming Interface</li>
</ul></li>
</ul>
</section>
<section id="twitter-api" class="level1">
<h1>Twitter API</h1>
<ul>
<li>Twitter is what’s happening in the world and what people are talking about right now. You can access Twitter via the web or your mobile device. To share information on Twitter as widely as possible, we also provide companies, developers, and users with programmatic access to Twitter data through our APIs (application programming interfaces).</li>
<li>At the end of 2020, Twitter introduced a new Twitter API built from the ground up. Twitter API v2 comes with more features and data you can pull and analyze, new endpoints, and a lot of functionalities.</li>
<li>With the introduction of that new API, Twitter also introduced a new powerful free product for academics: The Academic Research product track.</li>
<li>The track grants free access to full-archive search and other v2 endpoints, with a volume cap of 10,000,000 tweets per month! If you want to know if you qualify for the track or not, check this link.</li>
<li>Yet since v2 of the API is fairly new, fewer resources exist if you run into issues through the process of collecting data for your research.</li>
<li>Twitter data is unique from data shared by most other social platforms because it reflects information that users choose to share publicly. The API platform provides broad access to public Twitter data that users have chosen to share with the world. It also support APIs that allow users to manage their own non-public Twitter information (e.g., Direct Messages) and provide this information to developers whom they have authorized to do so.</li>
</ul>
</section>
<section id="import-libraries" class="level1">
<h1>Import Libraries</h1>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tqdm <span class="im">import</span> tqdm</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tweepy</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> turtle <span class="im">import</span> color</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="set-twitter-api-keys" class="level1">
<h1>Set Twitter API Keys</h1>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>consumer_key        <span class="op">=</span> <span class="st">'TGknXGDLF6fEbV58TN9FhZbxM'</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>consumer_secret     <span class="op">=</span> <span class="st">'z4zzWXeAEbb9qyKmUUC5Xnz8zLFhRfISxJ9Y4FSAzwyXeC5YI9'</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>access_token        <span class="op">=</span> <span class="st">'1567741611135717376-zV7iig0s4w338wBm40bKP9f9U5PcD3'</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>access_token_secret <span class="op">=</span> <span class="st">'XC1LDChPSXbyYY4cWmj50QIhP5fMVouGp9FCOF0KSnmIz'</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>bearer_token        <span class="op">=</span> <span class="st">'AAAAAAAAAAAAAAAAAAAAAOJigwEAAAAABJ</span><span class="sc">%2F</span><span class="st">EkkSNtKUorB8KrLpPbwIK18I%3DAVPH1a4Kukc6Hbu2JwOPpiTcUtwthDZpJ46iprRgYER8n6PJTw'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="set-the-twitter-authentication-and-bearer-token" class="level1">
<h1>Set the Twitter authentication and bearer token</h1>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>auth <span class="op">=</span> tweepy.OAuthHandler(consumer_key, consumer_secret)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>auth.set_access_token(access_token, access_token_secret)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> tweepy.API(auth, wait_on_rate_limit<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {<span class="st">"Authorization"</span>: <span class="st">"Bearer </span><span class="sc">{}</span><span class="st">"</span>.<span class="bu">format</span>(bearer_token)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Extraction function</p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search_twitter(query, max_results, bearer_token, start_time, end_time, tweet_fields):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    client <span class="op">=</span> tweepy.Client(bearer_token <span class="op">=</span> bearer_token)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    tweets <span class="op">=</span> tweepy.Paginator(client.search_recent_tweets, query<span class="op">=</span>query, tweet_fields<span class="op">=</span>tweet_fields,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                                start_time<span class="op">=</span>start_time, end_time<span class="op">=</span>end_time).flatten(limit <span class="op">=</span> max_results)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    tweet_search <span class="op">=</span> []</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> tweet <span class="kw">in</span> tweets:</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        tweet_search.append((tweet.text, tweet.author_id, tweet.created_at, tweet.lang))</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tweet_search</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Query Parameters</p>
<div class="cell" data-execution_count="12">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>query <span class="op">=</span> <span class="st">'ferrari f1 -is:retweet'</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>max_results <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>start_time <span class="op">=</span> <span class="st">'2022-09-22T00:00:00Z'</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>end_time <span class="op">=</span> <span class="st">'2022-09-27T00:00:00Z'</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>tweet_fields <span class="op">=</span> <span class="st">'text,author_id,created_at,lang'</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>search_list <span class="op">=</span> search_twitter(query, max_results, bearer_token, start_time, end_time, tweet_fields)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Storing the tweets to a CSV file</p>
<div class="cell" data-execution_count="23">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> store_tweets_f1(query_list):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    max_results <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    start_time <span class="op">=</span> <span class="st">'2022-09-22T00:00:00Z'</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    end_time <span class="op">=</span> <span class="st">'2022-09-27T00:00:00Z'</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    tweet_fields <span class="op">=</span> <span class="st">'text,author_id,created_at,lang'</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> query <span class="kw">in</span> query_list:</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        tweet_search <span class="op">=</span> search_twitter(query <span class="op">+</span> <span class="st">" f1 -is:retweet"</span>, max_results, bearer_token, start_time, end_time, tweet_fields)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> pd.DataFrame(tweet_search, columns <span class="op">=</span> [<span class="st">'text'</span>, <span class="st">'author_id'</span>, <span class="st">'created_at'</span>, <span class="st">'lang'</span>])</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df[df[<span class="st">'lang'</span>] <span class="op">==</span> <span class="st">'en'</span>]</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df[[<span class="st">'text'</span>, <span class="st">'lang'</span>]]</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        df.to_csv(<span class="st">'../../data/00-raw-data/'</span> <span class="op">+</span> query <span class="op">+</span> <span class="st">'_f1_tweets.csv'</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="33">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>query_list <span class="op">=</span> [<span class="st">'ferrari'</span>, <span class="st">'mercedes'</span>, <span class="st">'redbull'</span>, <span class="st">'mclaren'</span>, <span class="st">'aston martin'</span>, <span class="st">'alpha tauri'</span>, <span class="st">'alpine'</span>, <span class="st">'williams'</span>, <span class="st">'haas'</span>, <span class="st">'alfa romeo'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="34">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>store_tweets_f1(query_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="34">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>text</th>
      <th>lang</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>The only non-qualifier for the race was Franco...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>12</th>
      <td>IM RACING AGAIN! This time in a new league cal...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>19</th>
      <td>@l4ndoslove color: yellow\nweather: sunny\ndri...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>20</th>
      <td>@Leah5899_ Color: yellow\nWeather: spring suns...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>21</th>
      <td>@stella__f1 @estesunnies you fine with alfa ro...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>348</th>
      <td>F1: Zhou admits 2023 race seat ‘not decided ye...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>349</th>
      <td>Alfa Romeo and Haas are the only 2 F1 teams th...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>352</th>
      <td>Alfa Romeo must have the best value for money ...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>356</th>
      <td>Alpine, Alfa Romeo, Williams and Haas all have...</td>
      <td>en</td>
    </tr>
    <tr>
      <th>357</th>
      <td>Zhou admits Alfa Romeo 2023 race seat extensio...</td>
      <td>en</td>
    </tr>
  </tbody>
</table>
<p>180 rows × 2 columns</p>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>